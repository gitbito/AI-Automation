# High-Level Documentation Generator

This powerful tool streamlines the creation of high-level documentation for software project directories. It analyzes code modules, generates visual flow maps, and compiles comprehensive documentation, all while keeping track of usage metrics.

## Features

- **AI Enhanced Module Analysis**: Leverages an AI-driven process to analyze each module, using a user-editable prompt high_level_doc_prompt.txt from the AI_Prompts directory. You can adjust the prompt to obtain a variety of module insights such as:
   - Module Name
   - Primary Objectives
   - Key Functions and Roles
   - Important Variables
   - Interactions with Other System Parts
   - Main vs. Supportive Operations
   - Operational Sequence
   - Performance Factors
   - Reusability and Adaptability
   - Usage
   - Assumptions

- **Auto-Retry Logic and Enhanced Error Handling**: Sophisticated error handling and retry mechanisms ensure reliable documentation generation in unstable environments.

- **Visualization with Mermaid.js Flow Maps and Enhanced Syntax Handling**: AI-generated Mermaid.js scripts graphically represent module interactions, now with enhanced handling and validation of Mermaid diagram syntax. 

- **Mermaid CLI Image Conversion**: Converts Mermaid.js diagrams into images for a visual representation of the code architecture.

- **Skippable Files and Directories**: Customizable skip list to ignore specific files and directories during documentation.

- **Comprehensive Documentation**: Generates detailed markdown files for each module and compiles them into an overarching High_Level_Doc, complete with visual flow maps. 

- **Documentation Metrics Logging**: Records session duration, the token usage of the bito command, converting word counts to token counts for accurate usage metrics. Data is logged in bito_usage_log.txt.

- **Required Tool and File Verification**: Checks for the presence of necessary tools ("bito", "mmdc") and prompt files before starting the documentation process.

## Supported Languages

Supports Python, C, C++, Java, JavaScript, Go, Rust, Ruby, PHP, Bash, Kotlin and is extensible to other languages.

To add support for a new language, simply add the file extension to the CSV file `programming_languages.csv`.

```
py
c
cpp
java
js
go
rs
rb
php
sh
kt
```

## Prerequisites

Ensure the following tools are installed:

- `bito` : https://github.com/gitbito/CLI

- `mermaidcli` : https://github.com/mermaid-js/mermaid-cli

Also, make sure these prompt files are present in a specified prompt folder (`AI_Prompts` by default):

- `high_level_doc_prompt.txt`
- `mermaid_doc_prompt.txt`
- `fix_mermaid_syntax_prompt.txt`
- `system_introduction_prompt.txt`
- `system_overview_mermaid_update_prompt.txt`

## How to Use

1. **Clone the Repository**: Clone this repository to your local machine.
2. **Set Execution Permissions**: Provide the necessary execution permissions to the script:
   ```bash
   chmod +x createdoc.sh
   ```
3. **Run the Script**: Execute the script by providing the folder you wish to document as an argument:
   ```bash
   ./createdoc.sh <folder_to_document>
   ```

## Output

Upon successful execution of the script, the tool generates a directory named doc_<folder_name>, where <folder_name> is the name of the folder you specified for documentation.

The directory includes:

- Module Documentation: For each module within the specified folder, individual markdown files are generated. These files, titled `<module_name>_Doc.md`, contain high-level documentation of the module. This documentation is enriched with AI-enhanced analysis and insights, detailing aspects such as the module's primary objectives, key functions, interactions with other system parts, and more, all derived from a user-editable prompt.

- Visual Flow Maps: For each module, AI-generated Mermaid.js flowcharts are created, visually representing the module's interactions and structure. These flowcharts are based on the module's code and are included in the respective module's markdown documentation.

- Aggregated Documentation: A comprehensive markdown file `High_Level_Doc.md`, which consolidates the documentation from each module. Additionally, this file includes an aggregated Mermaid.js flowchart providing a system-wide overview. This overview is generated by iteratively combining and updating flowcharts from individual modules, offering a complete visual representation of the entire system's architecture.

- Documentation Metrics: The script logs session duration and token usage metrics for the AI processing commands. These metrics are recorded in bito_usage_log.txt for reference and analysis.


## Skip List

The Skip List feature allows for the exclusion of specific files and directories from the documentation process, enhancing the tool's flexibility and relevance. With the recent update, the tool now dynamically loads this list from a CSV file, streamlining the process of managing and updating the skip criteria.

### Updating the Skip List
By customizing the Skip List, you gain control over the documentation content, ensuring it's concise, relevant, and tailored to showcase the most significant aspects of your project.

Example `skip_list.csv` File
```
logs
node_modules
dist
target
bin
package-lock.json
data.json
build
.gradle
.idea
gradle
extension.js
vendor.js
ngsw.json
polyfills.js
init
.gv
```

To customize the Skip List to fit your project's needs, follow these steps:

1. **Open the CSV File**:
   - Locate and edit the skip_list.csv file, which should be in the same directory as the createdoc.sh script.

2. **Modify the Skip List**:
   - Add or remove file or directory patterns you want to exclude.
   - Each line in the CSV file represents a pattern to be skipped.
   - Example: To add a custom pattern, simply add a new line with the pattern, like `private_folder`.
   - Your modified list might look like this:
      ```
      logs
      node_modules
      private_folder
      dist
      build
      .gradle
      ```
3. **Save the CSV File:**:
   - After making your changes, save and close the CSV file.

5. **Re-run the Script**:
   - Execute the script again to apply the new Skip List settings. The tool will automatically load and use the updated list.

---
# Additional Note on Mermaid Syntax Handling
While the current fixes addresses common Mermaid syntax issues related to quotation marks, and empty open parenthesis (), there may still be other syntax errors that could occur in AI-generated Mermaid scripts for flow maps.

In the event of encountering such errors, users can manually correct these in the mermaid code blocks of the documentation. A useful tool for this is the Mermaid live editor, available at Mermaid Live Editor at https://mermaid.live/

This editor allows for easy visualization, editing and correction of Mermaid diagrams.

After manual corrections, continue the documentation process by running 

```mmdc -i High_Level_Doc.md -o High_Level_Doc.md``` 

Inside the directory containing the High-Level Doc markdown file. This command will update the documentation with the corrected diagram images from the mermaid scripts.

We recognize the importance of this issue and are committed to improving Mermaid syntax handling in future updates of the tool.
